#############################################
##### Testing
#############################################

set(prefix "${MODULE}")

add_test(
    NAME ${prefix}_can_Run
    COMMAND ${APPLICATION}
)
set_tests_properties (${prefix}_can_Run PROPERTIES
    LABELS "${MODULE}")


add_test(
    NAME ${prefix}_Do_Print_Help_Without_Arguments
    COMMAND ${APPLICATION}
)
set_tests_properties (${prefix}_Do_Print_Help_Without_Arguments PROPERTIES
    PASS_REGULAR_EXPRESSION "This is a weight converter application"
    LABELS "${MODULE}")


add_test(
    NAME ${prefix}_Can_Check_Number_Of_Arguments
    COMMAND ${APPLICATION} 20.2 'KG'
)
set_tests_properties (${prefix}_Can_Check_Number_Of_Arguments
  PROPERTIES PASS_REGULAR_EXPRESSION "ERROR: Should be 4 arguments.")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Weight_Argument
    COMMAND ${APPLICATION} -20.2 'KG' 'G' 's'
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Weight_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong number format!")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Weight_Type_Argument
    COMMAND ${APPLICATION} 20.2 'Í„' 'G' 's'
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Weight_Type_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong weight's type format!")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Operation_Argument
    COMMAND ${APPLICATION} 20.2 'Í„' 'G' 's'
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Operation_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong operation format!")


add_test(
    NAME ${prefix}_Can_Get_Weight
    COMMAND ${APPLICATION} 20 'KG' 'G' 'get'
)
set_tests_properties (${prefix}_Can_Get_Weight
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 5.3 ")


add_test(
    NAME ${prefix}_Can_Set_Weight
    COMMAND ${APPLICATION} 20 'KG' 'G' 'set'
)
set_tests_properties (${prefix}_Can_Get_Weight
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 20 ")


add_test(
    NAME ${prefix}_Can_Convert_To
    COMMAND ${APPLICATION} 20 'MG' 'G' 't'
)
set_tests_properties (${prefix}_Can_Convert_To
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 1")


add_test(
    NAME ${prefix}_Can_Convert_From_To
    COMMAND ${APPLICATION} 20 'MG' 'G' 'ft'
)
set_tests_properties (${prefix}_Can_Convert_From_To
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 0.02")