#############################################
##### Testing
#############################################

set(prefix "${MODULE}")

add_test(
    NAME ${prefix}_can_Run
    COMMAND ${APPLICATION}
)
set_tests_properties (${prefix}_can_Run PROPERTIES
    LABELS "${MODULE}")


add_test(
    NAME ${prefix}_Do_Print_Help_Without_Arguments
    COMMAND ${APPLICATION}
)
set_tests_properties (${prefix}_Do_Print_Help_Without_Arguments PROPERTIES
    PASS_REGULAR_EXPRESSION "This is a weight converter application"
    LABELS "${MODULE}")


add_test(
    NAME ${prefix}_Can_Check_Number_Of_Arguments
    COMMAND ${APPLICATION} 20 'KG'
)
set_tests_properties (${prefix}_Can_Check_Number_Of_Arguments
  PROPERTIES PASS_REGULAR_EXPRESSION "ERROR: Should be 4 arguments.")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Weight_Argument
    COMMAND ${APPLICATION} -20 'KG' 'G' 's'
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Weight_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong number format!")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Weight_Type_Argument
    COMMAND ${APPLICATION} 20 'Í„' 'G' 's'
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Weight_Type_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong weight's type format!")


add_test(
    NAME ${prefix}_Can_Detect_Wrong_Operation_Argument
    COMMAND ${APPLICATION} 20 KG G sset
)
set_tests_properties (${prefix}_Can_Detect_Wrong_Operation_Argument
  PROPERTIES PASS_REGULAR_EXPRESSION "Wrong operation format!")


add_test(
    NAME ${prefix}_Can_Get_Weight
    COMMAND ${APPLICATION} 20 KG G get
)
set_tests_properties (${prefix}_Can_Get_Weight
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 0.001")



add_test(
    NAME ${prefix}_Can_Set_Weight
    COMMAND ${APPLICATION} 20 KG G set
)
set_tests_properties (${prefix}_Can_Set_Weight
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 20")


add_test(
    NAME ${prefix}_Can_Convert_To_G
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_G
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 1")

add_test(
    NAME ${prefix}_Can_Convert_To_GR
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_GR
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 15.432358352941431")


add_test(
    NAME ${prefix}_Can_Convert_To_OZ
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_OZ
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 0.03527396194958")


add_test(
    NAME ${prefix}_Can_Convert_To_DR
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_DR
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 0.56438186076699492")


add_test(
    NAME ${prefix}_Can_Convert_To_LB
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_LB
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 0.0022046244201837776")


add_test(
    NAME ${prefix}_Can_Convert_To_CR
    COMMAND ${APPLICATION} 20 MG G t
)
set_tests_properties (${prefix}_Can_Convert_To_CR
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 5")


add_test(
    NAME ${prefix}_Can_Convert_From_DR_To_CR
    COMMAND ${APPLICATION} 20 MG G f
)
set_tests_properties (${prefix}_Can_Convert_From_DR_To_CR
  PROPERTIES PASS_REGULAR_EXPRESSION "Weight = 340")